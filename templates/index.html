{% extends "base.html" %}
{% load static %}

{% block title %}Lifeclover - 당신의 클로버가 되어 드릴게요{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
{% endblock %}

{% block content %}
<header class="header">
  <div class="container">
    <div class="header-content">
      <div class="logo" data-target-page="home">
        <img src="{% static 'img/logo.png' %}" alt="Lifeclover" class="logo-image">
        <span class="logo-text">Lifeclover</span>
      </div>

      <nav class="nav" aria-label="주요 메뉴">
        <button type="button" class="nav-item" data-target-page="services">알려줘요</button>
        <button type="button" class="nav-item" data-target-page="chat">대화해요</button>
        <button type="button" class="nav-item" data-target-page="diary">다이어리</button>
        <span class="nav-indicator" aria-hidden="true"></span>
      </nav>

      <div class="header-actions" data-auth></div>
    </div>
  </div>
</header>

<main>
  <section class="hero page-section active" data-page="home">
    <div class="hero-container">
      <div class="hero-text-section">
        <h1 class="hero-title">
          당신만의<br>
          클로버가 되어드릴게요
        </h1>
        <div class="hero-cta">
          <button type="button" class="cta-button primary" data-target-page="about">라잎클로버란?</button>
        </div>
      </div>

      <div class="hero-image-section">
        <img src="{% static 'img/lify.png' %}" alt="Lifeclover 캐릭터" class="clover-image">
      </div>
    </div>

    <div class="hero-input-section">
      <input type="text" class="hero-input" placeholder="오늘의 일을 나누고 싶으신가요?">
    </div>
  </section>

  <section class="about page-section" data-page="about" hidden>
    <div class="about-container">
      <div class="about-grid">
        <article class="about-card">
          <div class="about-icon">📖</div>
          <h3 class="about-title">알려줘요</h3>
          <p class="about-desc">장례 시설 및 조례, 디지털 개인 정보 처리,<br>
            유산처리 정보를 안내합니다.</p>
        </article>
        <article class="about-card">
          <div class="about-icon">💬</div>
          <h3 class="about-title">대화해요</h3>
          <p class="about-desc">편하게 대화해요. 라잎이와 생활 루틴 혹은 감정에 대해<br>
            공유하고 소중한 일상을 함께 쌓아갈 수 있어요!</p>
        </article>
        <article class="about-card">
          <div class="about-icon">✍️</div>
          <h3 class="about-title">다이어리</h3>
          <p class="about-desc">소중한 하루를 대신 정리해드려요.</p>
        </article>
      </div>

      <div class="about-ask">
        <div class="ask-header">
          <span class="ask-bulb">💡</span>
          <h2 class="ask-title">라잎이에게 물어보세요</h2>
        </div>

        <div class="ask-stage">
          <div class="ask-swiper swiper">
            <div class="swiper-wrapper">
              <div class="swiper-slide ask-slide" data-question="서울 종로구에 있는 장례식장 좀 알려줘">
                <div class="ask-answer-card">
                  <p class="answer-title">서울적십자병원장례식장</p>
                  <p class="answer-body">주소: 서울특별시 종로구 새문안로 9 (평동, 적십자병원)</p>
                  <p class="answer-body">전화: 02-2002-8444</p>
                </div>
              </div>
              <div class="swiper-slide ask-slide" data-question="서울에서 화장 장려금 받을 수 있어?">
                <div class="ask-answer-card">
                  <p class="answer-title">서울시 화장 장려금</p>
                  <p class="answer-body">지원 대상: 주민등록상 서울 거주자</p>
                  <p class="answer-body">신청: 사망자 주소지 관할 주민센터</p>
                </div>
              </div>
              <div class="swiper-slide ask-slide" data-question="카카오 계정 사망 후 처리 방법 알려줘">
                <div class="ask-answer-card">
                  <p class="answer-title">카카오 디지털 유산 처리</p>
                  <p class="answer-body">추모 프로필 해제 및 계정 삭제 절차 안내</p>
                  <p class="answer-body">필요 서류: 가족관계증명서, 신분증 사본 등</p>
                </div>
              </div>
            </div>
            <div class="swiper-button-prev ask-nav"></div>
            <div class="swiper-button-next ask-nav"></div>
            <div class="swiper-pagination ask-dots"></div>
          </div>

          <div class="ask-question-chip">서울 종로구에 있는 장례식장 좀 알려줘</div>
          <div class="ask-mascot">
            <img src="{% static 'img/lify3-1 1.png' %}" alt="라잎 캐릭터" loading="lazy">
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="services page-section" data-page="services" hidden>
    <div class="container">
      <div class="services-grid" data-services-grid>
        <article class="service-card">
          <div class="service-icon">🏛️</div>
          <h3 class="service-title">장례 시설 안내</h3>
          <p class="service-description">장례식장/봉안당/화장시설/묘지/자연장지 등의<br>장례 시설 정보를 제공합니다.</p>
        </article>
        <article class="service-card">
          <div class="service-icon">🤝</div>
          <h3 class="service-title">지원 정책</h3>
          <p class="service-description">공영장례, 화장 장려금 등의 정보를 제공합니다.</p>
        </article>
        <article class="service-card">
          <div class="service-icon">⚖️</div>
          <h3 class="service-title">유산 상속 안내</h3>
          <p class="service-description">유산 상속 절차 및 법률 정보를 제공합니다.</p>
        </article>
        <article class="service-card">
          <div class="service-icon">🔐</div>
          <h3 class="service-title">디지털 개인 정보</h3>
          <p class="service-description">디지털 계정 처리 방법에 대한 정보를 제공합니다.</p>
        </article>
      </div>

      <div class="chat-shell">
        <div class="chat-panel" data-chat-panel="services">
          <div class="chat-messages" data-chat-messages="services"></div>

          <div class="chat-input-container info-input">
            <div class="chat-input-top">
              <div class="quick-wrap">
                <button type="button" class="quick-toggle" data-quick-toggle>무엇이 궁금하세요?</button>
                <div class="quick-panel" data-quick-panel>
                  <button type="button" class="quick-item" data-quick-question="funeral_facilities">장례 시설 예시 질문
                    보기</button>
                  <button type="button" class="quick-item" data-quick-question="support_policy">지원 정책 예시 질문 보기</button>
                  <button type="button" class="quick-item" data-quick-question="inheritance">유산 상속 예시 질문 보기</button>
                  <button type="button" class="quick-item" data-quick-question="digital_info">디지털 정보 예시 질문 보기</button>
                </div>
              </div>
            </div>
            <div class="chat-input-body">
              <textarea class="chat-input" placeholder="무엇이 궁금하세요?... (Enter로 전송)"
                data-chat-input="services"></textarea>
            </div>
            <div class="chat-actions">
              <button type="button" class="send-button modern" data-send-message="services">전송</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="signup page-section" data-page="signup" hidden>
    <div class="container signup-container">
      <div class="signup-progress">
        <div class="progress-label" data-progress-text>0% 완료</div>
        <div class="progress-track">
          <div class="progress-bar" data-progress-bar style="width:0%"></div>
        </div>
      </div>

      <form class="signup-form" data-signup-form>
        <div class="signup-grid">
          <div class="signup-field">
            <label for="signup-username">아이디</label>
            <input id="signup-username" name="signup_username" type="text" placeholder="아이디를 입력하세요" required>
          </div>
          <div class="signup-field">
            <label for="signup-password">비밀번호</label>
            <input id="signup-password" name="signup_password" type="password" placeholder="비밀번호를 입력하세요" required>
          </div>
        </div>

        <div class="signup-checklist" data-checklist>
          <p class="checklist-loading">체크리스트를 불러오는 중입니다...</p>
        </div>

        <div class="signup-actions">
          <button type="submit" class="send-button modern">가입 완료</button>
          <button type="button" class="button button-ghost" data-target-page="home">취소</button>
        </div>
      </form>
    </div>
  </section>

  <section class="chatbot page-section" data-page="chat" hidden>
    <div class="chat-shell">
      <div class="chat-panel" data-chat-panel="chat">
        <div class="chat-messages" data-chat-messages="chat"></div>

        <div class="chat-input-container">
          <div class="chat-input-top"></div>
          <div class="chat-input-body">
            <textarea class="chat-input" placeholder="무엇이든 물어보세요... (Enter로 전송)" data-chat-input="chat"></textarea>
          </div>
          <div class="chat-actions">
            <button type="button" class="send-button modern" data-send-message="chat">전송</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="diary page-section" data-page="diary" hidden>
    <div class="container">
      <h1 class="diary-main-title">나의 다이어리</h1>
      <div class="calendar-layout">
        <div class="calendar-container">
          <div class="calendar-header">
            <button class="calendar-nav" data-change-month="-1">◀</button>
            <div class="calendar-title" data-month-title></div>
            <button class="calendar-nav" data-change-month="1">▶</button>
          </div>
          <div class="calendar-grid" data-calendar-grid></div>
        </div>

        <div class="diary-detail" data-diary-detail></div>
      </div>

      <div class="diary-generate-wrap">
        <button type="button" class="button diary-generate-btn" data-generate-diary>오늘 다이어리 생성</button>
      </div>
    </div>
  </section>

  <!-- 로그인 모달 -->
  <div class="modal-overlay" data-login-modal hidden>
    <div class="modal-card">
      <button class="modal-close" type="button" data-login-close aria-label="닫기">&times;</button>
      <div class="modal-title">로그인</div>
      <div class="modal-desc">ID를 입력해주세요.</div>
      <form class="modal-form" data-login-form>
        <div class="modal-field">
          <label class="sr-only" for="login-username">아이디</label>
          <input id="login-username" name="username" type="text" placeholder="아이디를 입력하세요." required>
        </div>
        <div class="modal-field">
          <label class="sr-only" for="login-password">비밀번호</label>
          <input id="login-password" name="password" type="password" placeholder="비밀번호를 입력하세요." required>
        </div>
        <div class="modal-actions">
          <button type="submit" class="modal-btn primary">로그인</button>
          <button type="button" class="modal-btn ghost" data-login-cancel>취소</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 탈퇴 모달 -->
  <div class="modal-overlay" data-delete-modal hidden>
    <div class="modal-card">
      <button class="modal-close" type="button" data-delete-close aria-label="닫기">&times;</button>
      <div class="modal-title">회원 탈퇴</div>
      <div class="modal-desc" data-delete-text>탈퇴하시겠습니까?</div>
      <div class="modal-actions">
        <button type="button" class="modal-btn primary" data-delete-confirm>탈퇴하기</button>
        <button type="button" class="modal-btn ghost" data-delete-cancel>취소</button>
      </div>
    </div>
  </div>
</main>

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
{% endblock %}
{% endblock %}